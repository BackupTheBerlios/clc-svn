# $Id: Pkgfile,v 1.9 2005/04/08 13:05:48 jue Exp $
# Description: Persistent Perl interpreter for the Apache HTTP server
# Maintainer:  Jürgen Daubert, juergen dot daubert at t-online dot de
# URL:         http://perl.apache.org
# Depends on:  apache
# Group:       apache

name=mod_perl
version=2.0.0-RC4
release=1
source=(http://perl.apache.org/dist/$name-$version.tar.gz)

build(){
   cd $name-$version
   perl Makefile.PL \
        MP_INST_APACHE2 MP_USE_DSO=1 \
        MP_APXS=/usr/sbin/apxs
   
   make
   make install \
        DESTDIR=$PKG \
        MODPERL_AP_LIBEXECDIR=$PKG/usr/lib/apache \
        MODPERL_AP_INCLUDEDIR=$PKG/usr/include/apache
  
   rm -r $PKG/usr/{bin,lib/perl5/5.8.?}
   find $PKG \( -name perllocal.pod -or -name .packlist \) -exec rm {} \;
}
